<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - app/View/GraphsView/LineChartView.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>app/View/GraphsView/LineChartView.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">63.56</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">173</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">27.02</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.36</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*jshint node: true */
&#039;use strict&#039;;

/*
* Name :  MapChart.js
* Module : FrontEnd::View
* Location : /frontend/app/View
*
* History :
* Version       Date        Programmer                  Description
* =================================================================================================
* 0.0.1         2015-06-02  Maria Giovanna Chinellato   Initial code      
* =================================================================================================
*/


angular.module(&#039;app&#039;)
.directive(&#039;lineChart&#039;, function($compile){
	return {
		restrict: &#039;E&#039;,
		//controller : &#039;LineChartController&#039;,
		replace: false,
        scope: {
            url: &#039;@&#039;
		},
		bindToController: true,
        //template: &#039;&lt;div&gt;ciao, sono il line chart&lt;/div&gt;&#039;,
        link: function(scope, element, attrs){

            scope.xAxisTickFormatFunction = function(){
                return function(d){
                    return d;
                };
            };
            scope.x2AxisTickFormatFunction = function(){
                return function(d){
                    return d;
                };
            };


            scope.exampleData = [
				{
					&#039;key&#039; : &#039;Quantity&#039;,
					&#039;values&#039; : [ 
						[ 1136005200000 , 127.0] , [ 1138683600000 , 127.0] , [ 1141102800000 , 127.0] , [ 1143781200000 , 0] , [ 1146369600000 , 0] , [ 1149048000000 , 0] , [ 1151640000000 , 0] , [ 1154318400000 , 0] , [ 1156996800000 , 0] , [ 1159588800000 , 389.94860] , [ 1162270800000 , 389.94860] , [ 1164862800000 , 389.94860] , [ 1167541200000 , 356.47000] , [ 1170219600000 , 356.47000] , [ 1172638800000 , 356.47000] , [ 1175313600000 , 264.84930] , [ 1177905600000 , 264.84930] , [ 1180584000000 , 264.84930] , [ 1183176000000 , 252.29930] , [ 1185854400000 , 252.29930] , [ 1188532800000 , 252.29930] , [ 1191124800000 , 290.65010] , [ 1193803200000 , 290.65010] , [ 1196398800000 , 290.65010] , [ 1199077200000 , 220.67610] , [ 1201755600000 , 220.67610] , [ 1204261200000 , 220.67610] , [ 1206936000000 , 228.77260] , [ 1209528000000 , 228.77260] , [ 1212206400000 , 228.77260] , [ 1214798400000 , 273.26460] , [ 1217476800000 , 273.26460] , [ 1220155200000 , 273.26460] , [ 1222747200000 , 259.91960] , [ 1225425600000 , 259.91960] , [ 1228021200000 , 259.91960] , [ 1230699600000 , 192.43870] , [ 1233378000000 , 192.43870] , [ 1235797200000 , 192.43870] , [ 1238472000000 , 175.63110] , [ 1241064000000 , 175.63110] , [ 1243742400000 , 175.63110] , [ 1246334400000 , 174.34700] , [ 1249012800000 , 174.34700] , [ 1251691200000 , 174.34700] , [ 1254283200000 , 151.90100] , [ 1256961600000 , 151.90100] , [ 1259557200000 , 151.90100] , [ 1262235600000 , 159.14440] , [ 1264914000000 , 159.14440] , [ 1267333200000 , 159.14440] , [ 1270008000000 , 154.37840] , [ 1272600000000 , 154.37840] , [ 1275278400000 , 154.37840] , [ 1277870400000 , 130.99150] , [ 1280548800000 , 130.99150] , [ 1283227200000 , 130.99150] , [ 1285819200000 , 133.18750] , [ 1288497600000 , 133.18750] , [ 1291093200000 , 133.18750] , [ 1293771600000 , 133.18750] , [ 1296450000000 , 115.46950] , [ 1298869200000 , 115.46950] , [ 1301544000000 , 119.40250] , [ 1304136000000 , 119.40250] , [ 1306814400000 , 119.40250] , [ 1309406400000 , 119.40250] , [ 1312084800000 , 119.40250] , [ 1314763200000 , 124.45250] , [ 1317355200000 , 47.50000] , [ 1320033600000 , 47.50000] , [ 1322629200000 , 47.50000] , [ 1325307600000 , 69.00330] , [ 1327986000000 , 69.00330] , [ 1330491600000 , 69.00330] , [ 1333166400000 , 51.47330] , [ 1335758400000 , 51.47330]]
				},
				{
					&#039;key&#039; : &#039;Price&#039;,
					&#039;values&#039; : [ [ 1136005200000 , 71.89] , [ 1138683600000 , 75.51] , [ 1141102800000 , 68.49] , [ 1143781200000 , 62.72] , [ 1146369600000 , 70.39] , [ 1149048000000 , 59.77] , [ 1151640000000 , 57.27] , [ 1154318400000 , 67.96] , [ 1156996800000 , 67.85] , [ 1159588800000 , 76.98] , [ 1162270800000 , 81.08] , [ 1164862800000 , 91.66] , [ 1167541200000 , 84.84] , [ 1170219600000 , 85.73] , [ 1172638800000 , 84.61] , [ 1175313600000 , 92.91] , [ 1177905600000 , 99.8] , [ 1180584000000 , 121.191] , [ 1183176000000 , 122.04] , [ 1185854400000 , 131.76] , [ 1188532800000 , 138.48] , [ 1191124800000 , 153.47] , [ 1193803200000 , 189.95] , [ 1196398800000 , 182.22] , [ 1199077200000 , 198.08] , [ 1201755600000 , 135.36] , [ 1204261200000 , 125.02] , [ 1206936000000 , 143.5] , [ 1209528000000 , 173.95] , [ 1212206400000 , 188.75] , [ 1214798400000 , 167.44] , [ 1217476800000 , 158.95] , [ 1220155200000 , 169.53] , [ 1222747200000 , 113.66] , [ 1225425600000 , 107.59] , [ 1228021200000 , 92.67] , [ 1230699600000 , 85.35] , [ 1233378000000 , 90.13] , [ 1235797200000 , 89.31] , [ 1238472000000 , 105.12] , [ 1241064000000 , 125.83] , [ 1243742400000 , 135.81] , [ 1246334400000 , 142.43] , [ 1249012800000 , 163.39] , [ 1251691200000 , 168.21] , [ 1254283200000 , 185.35] , [ 1256961600000 , 188.5] , [ 1259557200000 , 199.91] , [ 1262235600000 , 210.732] , [ 1264914000000 , 192.063] , [ 1267333200000 , 204.62] , [ 1270008000000 , 235.0] , [ 1272600000000 , 261.09] , [ 1275278400000 , 256.88] , [ 1277870400000 , 251.53] , [ 1280548800000 , 257.25] , [ 1283227200000 , 243.1] , [ 1285819200000 , 283.75] , [ 1288497600000 , 300.98] , [ 1291093200000 , 311.15] , [ 1293771600000 , 322.56] , [ 1296450000000 , 339.32] , [ 1298869200000 , 353.21] , [ 1301544000000 , 348.5075] , [ 1304136000000 , 350.13] , [ 1306814400000 , 347.83] , [ 1309406400000 , 335.67] , [ 1312084800000 , 390.48] , [ 1314763200000 , 384.83] , [ 1317355200000 , 381.32] , [ 1320033600000 , 404.78] , [ 1322629200000 , 382.2] , [ 1325307600000 , 405.0] , [ 1327986000000 , 456.48] , [ 1330491600000 , 542.44] , [ 1333166400000 , 599.55] , [ 1335758400000 , 583.98] ]
				}
			];

        	attrs.$observe(&#039;url&#039;, function(value) {
                console.log(&#039;LINECHART observ url &#039; + value);
                if (value) {
                    scope.$parent.socketConnection(value);
                }
            });

            scope.$parent.$watch(&#039;changedP&#039;, function(newValue, oldValue){
                if (newValue !== oldValue) {
                    console.log(&#039;LINECHART watch changedP&#039;);
                    scope.init();
                }
            }, true);

            scope.$parent.$watch(&#039;changedD&#039;, function(newValue, oldValue){
                if(newValue !== oldValue){
                    console.log(&#039;LINECHART watch changedD&#039;);                    
                    //scope.setData();
                }
            }, true);

            scope.$parent.$watch(&#039;changedF&#039;, function(newValue, oldValue){
                if(newValue !== oldValue){
                    console.log(&#039;LINECHART watch changedF&#039;);                    
                    //scope.legend();
                }
            }, true);

            scope.init = function(){
                while(element.firstChild) {
                    element.removeChild(element.firstChild);
                }
                console.log(&#039;LINECHART init&#039;);
                var linechart, legend, onPoint;
                var str = scope.url.split(&#039;/&#039;);
                var id = str[str.length-1];

                if (scope.$parent.lineChart.getLegend() !== null){
                    legend = true;
                } else {
                    legend = false;
                }
                if (scope.$parent.lineChart.getLegendOnPoint()){
                    onPoint = true;
                } else {
                    onPoint = false;
                }

                if (scope.$parent.lineChart.getViewFinder() === true) {
                    linechart = &#039;&lt;nvd3-line-with-focus-chart data=&quot;exampleData&quot; nodata=&quot; &quot; id=&quot;&#039;+ id +&#039;&quot; &#039;;
                    linechart = linechart + &#039;width=&quot;&#039;+ scope.$parent.lineChart.getWidth() +&#039;&quot; height=&quot;&#039;+ scope.$parent.lineChart.getHeight() +&#039;&quot; &#039;;
                    linechart = linechart + &#039;yaxistickformat=&quot;yAxisTickFormatFunction()&quot; xaxistickformat=&quot;xAxisTickFormatFunction()&quot; x2axistickformat=&quot;x2AxisTickFormatFunction()&quot; &#039;;
                    linechart = linechart + &#039;margin=&quot;{left:80,top:50,bottom:30,right:50}&quot; margin2=&quot;{left:80,top:50,bottom:30,right:50}&quot; interactive=&quot;true&quot; showlegend=&quot;&#039;+ legend +&#039;&quot; tooltips=&quot;&#039;+ onPoint +&#039;&quot; &#039;;
                    linechart = linechart + &#039;xaxisrotatelabels=&quot;-90&quot; x2axisrotatelables=&quot;-90&quot;&gt;&#039;;
                    linechart = linechart + &#039;&lt;svg&gt;&lt;/svg&gt;&lt;/nvd3-line-with-focus-chart&gt;&#039;;
                } else {
                    linechart = &#039;&lt;nvd3-line-chart data=&quot;exampledData&quot; nodata=&quot; &quot; id=&quot;&#039;+ id +&#039;&quot; &#039;;
                    linechart = linechart + &#039;width=&quot;&#039;+ scope.$parent.lineChart.getWidth() +&#039;&quot; height=&quot;&#039;+ scope.$parent.lineChart.getHeight() +&#039;&quot; &#039;;
                    linechart = linechart + &#039;margin=&quot;{left:80,top:50,bottom:30,right:50}&quot; interactive=&quot;true&quot; showlegend=&quot;&#039;+ legend +&#039;&quot; tooltips=&quot;&#039;+ onPoint +&#039;&quot; &#039;;
                    linechart = linechart + &#039;yaxistickformat=&quot;yAxisTickFormatFunction()&quot; xaxistickformat=&quot;xAxisTickFormatFunction()&quot; &#039;;
                    linechart = linechart + &#039;xaxisrotatelabels=&quot;-90&quot;&gt;&#039;;
                    linechart = linechart + &#039;&lt;svg&gt;&lt;/svg&gt;&lt;/nvd3-line-chart&gt;&#039;;
                }

                var compiled = $compile(linechart)(scope);
                element.append(compiled);

            };

            scope.setData = function(){
                var data = [];
                var colorArray = [];

                for (var i=0; i&lt;scope.$parent.lineChart.getFlowList().length; i++) {
                    var key;
                    var values = [];
                    key = scope.$parent.lineChart.getFlowList()[i].flow.getName();
                    colorArray.push(scope.$parent.lineChart.getFlowList()[i].flow.getFlowColor());
                    console.log(&#039;length &#039; + scope.$parent.lineChart.getFlowList().length);
                    for (var j=0; j&lt;scope.$parent.lineChart.getFlowList()[i].flow.getData().length; j++) {
                        var value = [scope.$parent.lineChart.getFlowList()[i].flow.getData()[j].value[0], scope.$parent.lineChart.getFlowList()[i].flow.getData()[j].value[1]];
                        values.push(value);
                    }
                    data.push({ &#039;key&#039;: key, &#039;values&#039;: values});
                    console.log(&#039;linechart data &#039; + data.toString());
                }
                scope.data = data;
                scope.colorArray = colorArray;

            };

            /*scope.legend = function() {
                var parent = element.children()[1];
                while(parent.firstChild) {
                    parent.removeChild(parent.firstChild);
                }
                console.log(&#039;legend &#039; + JSON.stringify(scope.$parent.lineChart.getLegend()));
                if (scope.$parent.lineChart.getLegend() !== null) {
                    parent.setAttribute(&#039;style&#039;, &#039;background-color: &#039; + scope.$parent.lineChart.getLegend().getBackgroundColor() + &#039;; color: &#039;+ scope.$parent.lineChart.getLegend().getFontColor());
                    var ul = document.createElement(&#039;ul&#039;);
                    ul.setAttribute(&#039;style&#039;, &#039;list-style-type: none&#039;);
                    parent.appendChild(ul);
                    for (var i=0; i&lt;scope.$parent.lineChart.getFlowList().length; i++) {
                        var li = document.createElement(&#039;li&#039;);
                        var square = document.createElement(&#039;div&#039;);
                        square.setAttribute(&#039;style&#039;, &#039;height: 15px; width: 15px; float: left; background-color: &#039; + scope.$parent.lineChart.getFlowList()[i].flow.getTrace().strokeColor);
                        var spanText = document.createElement(&#039;div&#039;);
                        var text = document.createTextNode(&#039;\u00A0\u00A0\u00A0\u00A0&#039; + scope.$parent.lineChart.getFlowList()[i].flow.getName());
                        spanText.appendChild(text);
                        li.appendChild(square);
                        li.appendChild(spanText);
                        console.log(ul);
                        ul.appendChild(li);
                    }
                }

            };*/

        }
    };
});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
